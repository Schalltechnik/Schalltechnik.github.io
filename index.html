<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Schallrechner Luftw√§rmepumpen | OIB-Richtlinie 5</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Professioneller Schallrechner f√ºr Luftw√§rmepumpen nach OIB-Richtlinie 5 (2023) und TA L√§rm">
<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  --primary-green: #4a7c3b;
  --primary-dark: #2d5a24;
  --light-green: #f0f7ed;
  --border-color: #e0e0e0;
  --text-dark: #333;
  --text-medium: #666;
  --success-bg: #d4edda;
  --success-border: #c3e6cb;
  --success-text: #155724;
  --warning-bg: #fff3cd;
  --warning-border: #ffc107;
  --warning-text: #856404;
  --error-bg: #f8d7da;
  --error-border: #f5c6cb;
  --error-text: #721c24;
  --info-bg: #e7f3ff;
  --info-border: #b3d9ff;
  --info-text: #004085;
}

body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-dark) 100%);
  min-height: 100vh;
  padding: 20px;
}

.page-container {
  max-width: 1200px;
  margin: 0 auto;
}

header {
  background: white;
  border-radius: 12px;
  padding: 30px;
  margin-bottom: 20px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 20px;
}

h1 {
  color: var(--text-dark);
  font-size: 32px;
  margin: 0;
}

.subtitle {
  color: var(--text-medium);
  font-size: 16px;
  margin-top: 5px;
}

nav {
  display: flex;
  gap: 15px;
}

.nav-btn {
  padding: 10px 20px;
  background: var(--light-green);
  border: 2px solid var(--primary-green);
  border-radius: 6px;
  color: var(--primary-dark);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s;
  font-size: 14px;
}

.nav-btn:hover {
  background: var(--primary-green);
  color: white;
}

.nav-btn.active {
  background: var(--primary-green);
  color: white;
}

.content-wrapper {
  display: grid;
  grid-template-columns: 1fr;
  gap: 20px;
}

@media (min-width: 1024px) {
  .content-wrapper.with-sidebar {
    grid-template-columns: 1fr 350px;
  }
}

.main-content {
  background: white;
  border-radius: 12px;
  padding: 40px;
  box-shadow: 0 10px 40px rgba(0,0,0,0.2);
}

.sidebar {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.info-card {
  background: white;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

.info-card h3 {
  color: var(--text-dark);
  font-size: 18px;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.info-card ul {
  list-style: none;
  padding-left: 0;
}

.info-card li {
  padding: 8px 0;
  color: var(--text-medium);
  font-size: 14px;
  border-bottom: 1px solid var(--border-color);
}

.info-card li:last-child {
  border-bottom: none;
}

.info-card li:before {
  content: "‚úì ";
  color: var(--primary-green);
  font-weight: bold;
  margin-right: 8px;
}

.page-title {
  color: var(--text-dark);
  margin-bottom: 10px;
  font-size: 28px;
}

.page-description {
  color: var(--text-medium);
  margin-bottom: 30px;
  font-size: 16px;
  line-height: 1.7;
}

.section {
  margin-bottom: 35px;
  padding: 25px;
  background: #f8f9fa;
  border-radius: 8px;
  border-left: 4px solid var(--primary-green);
}

.section-title {
  font-size: 20px;
  font-weight: 600;
  color: var(--text-dark);
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.section-number {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
  background: var(--primary-green);
  color: white;
  border-radius: 50%;
  font-size: 16px;
}

.input-group {
  margin-bottom: 20px;
}

label {
  display: block;
  margin-bottom: 8px;
  font-weight: 600;
  color: var(--text-dark);
  font-size: 15px;
}

input, select {
  width: 100%;
  padding: 12px;
  border: 2px solid var(--border-color);
  border-radius: 6px;
  font-size: 16px;
  transition: border-color 0.3s;
  background: white;
  font-family: inherit;
}

input:focus, select:focus {
  outline: none;
  border-color: var(--primary-green);
}

.input-unit {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: end;
}

.unit-label {
  padding: 12px 16px;
  background: var(--light-green);
  border: 2px solid var(--border-color);
  border-radius: 6px;
  color: var(--text-dark);
  font-weight: 600;
  font-size: 14px;
  white-space: nowrap;
}

.radio-group {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 10px;
}

.radio-option {
  display: flex;
  align-items: center;
  padding: 12px;
  border: 2px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
  background: white;
}

.radio-option:hover {
  border-color: var(--primary-green);
  background: var(--light-green);
}

.radio-option input[type="radio"] {
  width: auto;
  margin-right: 10px;
  cursor: pointer;
}

.radio-option.selected {
  border-color: var(--primary-green);
  background: var(--light-green);
}

.checkbox-option {
  display: flex;
  align-items: flex-start;
  padding: 12px;
  border: 2px solid var(--border-color);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
  background: white;
  margin-bottom: 10px;
}

.checkbox-option:hover {
  border-color: var(--primary-green);
  background: var(--light-green);
}

.checkbox-option input[type="checkbox"] {
  width: auto;
  margin-right: 10px;
  margin-top: 3px;
  cursor: pointer;
}

.checkbox-option.selected {
  border-color: var(--primary-green);
  background: var(--light-green);
}

.help-text {
  font-size: 13px;
  color: var(--text-medium);
  margin-top: 5px;
  font-style: italic;
}

.diagram-container {
  margin-top: 15px;
  padding: 15px;
  background: white;
  border: 2px solid var(--border-color);
  border-radius: 6px;
}

button {
  width: 100%;
  padding: 16px;
  font-size: 18px;
  font-weight: 600;
  color: white;
  background: linear-gradient(135deg, var(--primary-green) 0%, var(--primary-dark) 100%);
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.3s;
  margin-top: 10px;
  font-family: inherit;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 20px rgba(74, 124, 59, 0.4);
}

button:active {
  transform: translateY(0);
}

#result {
  margin-top: 30px;
  display: none;
}

#result.show {
  display: block;
}

.result-section {
  padding: 25px;
  border-radius: 8px;
  margin-bottom: 20px;
  border: 2px solid var(--border-color);
}

.result-header {
  font-size: 22px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 20px;
  color: var(--text-dark);
}

.result-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-bottom: 20px;
}

.result-item {
  background: white;
  padding: 15px;
  border-radius: 6px;
  border: 2px solid var(--border-color);
}

.result-label {
  font-size: 14px;
  color: var(--text-medium);
  margin-bottom: 5px;
}

.result-value {
  font-size: 24px;
  font-weight: bold;
  color: var(--text-dark);
}

.comparison-box {
  padding: 20px;
  border-radius: 8px;
  text-align: center;
  font-size: 18px;
  font-weight: 600;
  margin-top: 20px;
}

.comparison-below {
  background-color: var(--success-bg);
  color: var(--success-text);
  border: 2px solid var(--success-border);
}

.comparison-above {
  background-color: var(--error-bg);
  color: var(--error-text);
  border: 2px solid var(--error-border);
}

.info-box {
  background: var(--info-bg);
  border: 2px solid var(--info-border);
  border-radius: 6px;
  padding: 15px;
  margin-top: 15px;
  font-size: 14px;
  color: var(--info-text);
  line-height: 1.6;
}

.warning-box {
  background: var(--warning-bg);
  border: 2px solid var(--warning-border);
  border-radius: 6px;
  padding: 15px;
  margin-top: 15px;
  font-size: 14px;
  color: var(--warning-text);
  line-height: 1.6;
}

.error-box {
  background: var(--error-bg);
  border: 2px solid var(--error-border);
  color: var(--error-text);
  padding: 20px;
  border-radius: 8px;
  text-align: center;
}

.details-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}

.details-table th,
.details-table td {
  padding: 10px;
  text-align: left;
  border-bottom: 1px solid var(--border-color);
}

.details-table th {
  background: var(--light-green);
  font-weight: 600;
  color: var(--text-dark);
}

.page-content {
  display: none;
}

.page-content.active {
  display: block;
}

footer {
  background: white;
  border-radius: 12px;
  padding: 20px;
  margin-top: 20px;
  text-align: center;
  color: var(--text-medium);
  font-size: 14px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

@media (max-width: 768px) {
  body {
    padding: 10px;
  }
  
  header, .main-content, .info-card {
    padding: 20px;
  }
  
  h1 {
    font-size: 24px;
  }
  
  nav {
    width: 100%;
    flex-direction: column;
  }
  
  .nav-btn {
    width: 100%;
    text-align: center;
  }
}
</style>
</head>
<body>
<div class="page-container">
  <header>
    <div class="header-content">
      <div>
        <h1>üîä Schallrechner Luftw√§rmepumpen</h1>
        <div class="subtitle">Berechnung nach OIB-Richtlinie 5 (2023) und TA L√§rm</div>
      </div>
      <nav>
        <button class="nav-btn active" data-page="calculator">Rechner</button>
        <button class="nav-btn" data-page="basics">Grundlagen</button>
        <button class="nav-btn" data-page="about">Info</button>
      </nav>
    </div>
  </header>

  <div class="content-wrapper with-sidebar">
    <main class="main-content">
      <!-- CALCULATOR PAGE -->
      <div id="page-calculator" class="page-content active">
        <h2 class="page-title">Schallimmissionsrechner</h2>
        <p class="page-description">
          Dieser Rechner erm√∂glicht die √ºberschl√§gige Ermittlung der Schallimmissionen einer oder mehrerer Luftw√§rmepumpen 
          an der Grundst√ºcksgrenze und am Immissionsort (z.B. Fenster). Die Berechnung erfolgt nach dem vereinfachten 
          Verfahren der TA L√§rm unter Ber√ºcksichtigung der Immissionsrichtwerte nach OIB-Richtlinie 5.
        </p>

        <!-- Section 1: Device Data -->
        <div class="section">
          <div class="section-title">
            <span class="section-number">1</span>
            Angaben zur W√§rmepumpe
          </div>
          
          <div class="input-group">
            <label>Ger√§tedatenbank:</label>
            <select id="device_database">
              <option value="">Ger√§t manuell eingeben</option>
              <optgroup label="Beispielger√§te (Richtwerte)">
                <option value="db1">Luft-WP 6 kW (Lw Tag: 58 dB / Nacht: 53 dB)</option>
                <option value="db2">Luft-WP 10 kW (Lw Tag: 62 dB / Nacht: 57 dB)</option>
                <option value="db3">Luft-WP 15 kW (Lw Tag: 65 dB / Nacht: 60 dB)</option>
                <option value="db4">Luft-WP 20 kW (Lw Tag: 67 dB / Nacht: 62 dB)</option>
              </optgroup>
            </select>
            <div class="help-text">W√§hlen Sie ein Beispielger√§t oder geben Sie die Werte manuell ein</div>
          </div>

          <div class="input-group">
            <label for="lw_day">Max. Schallleistungspegel Tagbetrieb L<sub>W,A,max</sub>:</label>
            <div class="input-unit">
              <input type="number" id="lw_day" value="60" step="0.1" min="0" max="120">
              <span class="unit-label">dB(A)</span>
            </div>
            <div class="help-text">Wert aus Herstellerangaben (nicht ErP-Label)</div>
          </div>

          <div class="input-group">
            <label for="lw_night">Max. Schallleistungspegel schallreduzierter Betrieb L<sub>W,A,red</sub>:</label>
            <div class="input-unit">
              <input type="number" id="lw_night" value="55" step="0.1" min="0" max="120">
              <span class="unit-label">dB(A)</span>
            </div>
            <div class="help-text">F√ºr Nacht- und Abendbetrieb (22:00-6:00 und 19:00-22:00 Uhr)</div>
          </div>

          <div class="input-group">
            <label>Tonhaltigkeit Tagbetrieb (K<sub>T</sub>):</label>
            <select id="tone_day">
              <option value="0">nicht h√∂rbar (0 dB)</option>
              <option value="3">h√∂rbar (+3 dB)</option>
              <option value="6">stark h√∂rbar (+6 dB)</option>
            </select>
          </div>

          <div class="input-group">
            <label>Tonhaltigkeit Nacht-/Abendbetrieb (K<sub>T</sub>):</label>
            <select id="tone_night">
              <option value="0">nicht h√∂rbar (0 dB)</option>
              <option value="3">h√∂rbar (+3 dB)</option>
              <option value="6">stark h√∂rbar (+6 dB)</option>
            </select>
          </div>

          <div class="input-group">
            <label for="num_units">Anzahl gleichzeitig betriebener Anlagen:</label>
            <div class="input-unit">
              <input type="number" id="num_units" value="1" step="1" min="1" max="10">
              <span class="unit-label">St√ºck</span>
            </div>
            <div class="help-text">Mehrere Anlagen auf einem Grundst√ºck sind als Gesamtanlage zu betrachten</div>
          </div>
        </div>

        <!-- Section 2: Limits -->
        <div class="section">
          <div class="section-title">
            <span class="section-number">2</span>
            Immissionsrichtwerte
          </div>
          
          <div class="input-group">
            <label>Empfindlichkeitsstufe gem√§√ü OIB-RL 5, Punkt 5.2:</label>
            <div class="radio-group">
              <label class="radio-option selected">
                <input type="radio" name="sensitivity" value="kategorie1" checked>
                <span><strong>Kategorie 1</strong> ‚Äì Ruhegebiete, Kurgebiete, Wohngebiet in Vororten<br>
                <small style="color: #666;">Tag: 40 dB / Abend: 35 dB / Nacht: 30 dB</small></span>
              </label>
              <label class="radio-option">
                <input type="radio" name="sensitivity" value="kategorie2">
                <span><strong>Kategorie 2</strong> ‚Äì St√§dtisches Wohngebiet, l√§ndliches Wohngebiet<br>
                <small style="color: #666;">Tag: 45 dB / Abend: 40 dB / Nacht: 35 dB</small></span>
              </label>
              <label class="radio-option">
                <input type="radio" name="sensitivity" value="kategorie3">
                <span><strong>Kategorie 3</strong> ‚Äì Wohnen in st√§dtischem Umfeld, Kerngebiet, Mischgebiet<br>
                <small style="color: #666;">Tag: 50 dB / Abend: 45 dB / Nacht: 40 dB</small></span>
              </label>
            </div>
            <div class="help-text">Die Kategorien sind durch die Bundesl√§nder festzulegen bzw. werden aus der Fl√§chenwidmung abgeleitet</div>
          </div>
        </div>

        <!-- Section 3: Installation -->
        <div class="section">
          <div class="section-title">
            <span class="section-number">3</span>
            Aufstellung und Abst√§nde
          </div>
          
          <div class="input-group">
            <label>Raumwinkelma√ü K‚ÇÄ:</label>
            <select id="k0">
              <option value="3">Frei aufgestellt (keine Wand n√§her als 3 m) ‚Äì K‚ÇÄ = +3 dB</option>
              <option value="6">An einer Wand (Abstand bis zu 3 m) ‚Äì K‚ÇÄ = +6 dB</option>
              <option value="9">In einer Ecke (Abstand jeweils bis zu 3 m) ‚Äì K‚ÇÄ = +9 dB</option>
              <option value="9.5">Zwischen zwei W√§nden (Abstand bis zu 5 m) ‚Äì K‚ÇÄ = +9 dB</option>
              <option value="9.6">Unter einem Vordach (H√∂he bis zu 5 m) ‚Äì K‚ÇÄ = +9 dB</option>
            </select>
            <div class="help-text">Aufstellungssituation beeinflusst die Schallabstrahlung</div>
            <div id="k0-diagram" class="diagram-container"></div>
          </div>

          <div class="input-group">
            <label for="distance_boundary">Abstand W√§rmepumpe ‚Äì Grundst√ºcksgrenze:</label>
            <div class="input-unit">
              <input type="number" id="distance_boundary" value="5" step="0.1" min="0.1" max="1000">
              <span class="unit-label">m</span>
            </div>
            <div class="help-text">K√ºrzester Abstand zur Nachbargrundst√ºcksgrenze (nicht Verkehrsfl√§che)</div>
          </div>

          <div class="input-group">
            <label for="distance_immission">Abstand W√§rmepumpe ‚Äì Immissionsort (z.B. Fenster):</label>
            <div class="input-unit">
              <input type="number" id="distance_immission" value="8" step="0.1" min="0.1" max="1000">
              <span class="unit-label">m</span>
            </div>
            <div class="help-text">Abstand zum schutzbed√ºrftigen Raum (z.B. Schlafzimmerfenster des Nachbarn)</div>
          </div>
        </div>

        <!-- Section 4: Sound Protection Measures -->
        <div class="section">
          <div class="section-title">
            <span class="section-number">4</span>
            Schallschutzma√ünahmen (optional)
          </div>
          
          <div class="input-group">
            <label>Ber√ºcksichtigte Ma√ünahmen:</label>
            
            <label class="checkbox-option">
              <input type="checkbox" id="measure_enclosure">
              <span><strong>Schalleinhausung</strong><br>
              <small style="color: #666;">Pegelminderung: -10 dB | Zus√§tzliche D√§mmung um die W√§rmepumpe</small></span>
            </label>

            <label class="checkbox-option">
              <input type="checkbox" id="measure_wall">
              <span><strong>Schallschutzwand / -kulisse</strong><br>
              <small style="color: #666;">Pegelminderung: -6 dB | Absorbierendes Element zwischen Quelle und Immissionsort</small></span>
            </label>

            <label class="checkbox-option">
              <input type="checkbox" id="measure_damping">
              <span><strong>K√∂rperschallentkopplung</strong><br>
              <small style="color: #666;">Pegelminderung: -3 dB | Schwingungsd√§mpfende Aufstellung</small></span>
            </label>

            <div class="warning-box">
              <strong>Hinweis:</strong> Die angegebenen Pegelminderungen sind Richtwerte. 
              Die tats√§chliche Wirkung h√§ngt von der konkreten Ausf√ºhrung ab und sollte durch einen Sachverst√§ndigen gepr√ºft werden.
            </div>
          </div>
        </div>

        <button type="button" id="calculateBtn">
          üßÆ Berechnung durchf√ºhren
        </button>

        <!-- RESULTS -->
        <div id="result"></div>

        <div class="info-box">
          <strong>Wichtiger Hinweis:</strong> Diese Berechnung stellt eine √ºberschl√§gige Prognose dar und 
          ersetzt im Falle von Nachbarschaftsstreitigkeiten oder beh√∂rdlichen Verfahren kein individuelles 
          Schallgutachten durch einen befugten Sachverst√§ndigen.
        </div>
      </div>

      <!-- BASICS PAGE -->
      <div id="page-basics" class="page-content">
        <h2 class="page-title">Grundlagen zum Schall</h2>
        
        <div class="section">
          <div class="section-title">Was ist Schall?</div>
          <p>Schall ist eine mechanische Schwingung, die sich durch die Luft oder andere Medien ausbreitet. 
          Der Mensch nimmt Schalldruck√§nderungen √ºber das Ohr als Ger√§usch wahr.</p>
          <p style="margin-top: 10px;"><strong>Schalldruckpegel:</strong> Der Schalldruck wird in Dezibel (dB) gemessen. 
          Die Dezibelskala ist logarithmisch ‚Äì eine Verdoppelung der Schallenergie entspricht einer Erh√∂hung um 3 dB, 
          eine Verzehnfachung um 10 dB.</p>
        </div>

        <div class="section">
          <div class="section-title">OIB-Richtlinie 5 und Immissionsrichtwerte</div>
          <p>Die <strong>OIB-Richtlinie 5</strong> (Ausgabe Mai 2023) regelt den Schallschutz im Hochbau in √ñsterreich. 
          Punkt 5.2 definiert Immissionsrichtwerte f√ºr technische Anlagen zur Konditionierung von Geb√§uden 
          bei Schall√ºbertragung im Freien.</p>
          
          <table class="details-table" style="margin-top: 15px;">
            <tr>
              <th>Kategorie</th>
              <th>Tag<br>6-19 Uhr</th>
              <th>Abend<br>19-22 Uhr</th>
              <th>Nacht<br>22-6 Uhr</th>
            </tr>
            <tr>
              <td><strong>Kategorie 1</strong><br><small>Ruhegebiete, Kurorte</small></td>
              <td>40 dB</td>
              <td>35 dB</td>
              <td>30 dB</td>
            </tr>
            <tr>
              <td><strong>Kategorie 2</strong><br><small>Wohngebiete</small></td>
              <td>45 dB</td>
              <td>40 dB</td>
              <td>35 dB</td>
            </tr>
            <tr>
              <td><strong>Kategorie 3</strong><br><small>Mischgebiete</small></td>
              <td>50 dB</td>
              <td>45 dB</td>
              <td>40 dB</td>
            </tr>
          </table>
        </div>
      </div>

      <!-- ABOUT PAGE -->
      <div id="page-about" class="page-content">
        <h2 class="page-title">√úber diesen Rechner</h2>
        
        <div class="section">
          <div class="section-title">Zweck und Anwendungsbereich</div>
          <p>Dieser Schallrechner wurde entwickelt, um Planern, Installateuren und Bauherren ein Werkzeug 
          zur √ºberschl√§gigen Beurteilung der Schallimmissionen von Luftw√§rmepumpen bereitzustellen.</p>
          
          <p style="margin-top: 10px;">Die Berechnung erfolgt nach dem <strong>vereinfachten Prognoseverfahren</strong> 
          der TA L√§rm unter Ber√ºcksichtigung der <strong>OIB-Richtlinie 5 (Mai 2023)</strong>, Punkt 5.2.</p>
        </div>

        <div class="section">
          <div class="section-title">Berechnungsgrundlagen</div>
          <p><strong>Verwendete Formel:</strong></p>
          <div style="padding: 15px; background: white; border-radius: 6px; margin: 10px 0; font-family: monospace;">
            L<sub>p</sub> = L<sub>W</sub> + K‚ÇÄ - 20¬∑log‚ÇÅ‚ÇÄ(r) - 11 + K<sub>T</sub> - K<sub>M</sub>
          </div>
        </div>
      </div>
    </main>

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="info-card">
        <h3>üìã Schnellanleitung</h3>
        <ul>
          <li>W√§hlen Sie ein Beispielger√§t oder geben Sie die Schallleistungspegel manuell ein</li>
          <li>W√§hlen Sie die Empfindlichkeitsstufe des Standorts</li>
          <li>Geben Sie die Aufstellungssituation und Abst√§nde ein</li>
          <li>Optional: Ber√ºcksichtigen Sie Schallschutzma√ünahmen</li>
          <li>Klicken Sie auf "Berechnung durchf√ºhren"</li>
        </ul>
      </div>

      <div class="info-card">
        <h3>‚öñÔ∏è Immissionsrichtwerte</h3>
        <p style="font-size: 13px; color: #666; margin-bottom: 10px;">
          Gem√§√ü OIB-RL 5, Punkt 5.2:
        </p>
        <table style="width: 100%; font-size: 12px; border-collapse: collapse;">
          <tr style="background: #f8f9fa;">
            <th style="padding: 8px; text-align: left; border-bottom: 1px solid #ddd;">Zeit</th>
            <th style="padding: 8px; text-align: center; border-bottom: 1px solid #ddd;">Kat. 1</th>
            <th style="padding: 8px; text-align: center; border-bottom: 1px solid #ddd;">Kat. 2</th>
            <th style="padding: 8px; text-align: center; border-bottom: 1px solid #ddd;">Kat. 3</th>
          </tr>
          <tr>
            <td style="padding: 8px;">Tag</td>
            <td style="padding: 8px; text-align: center;">40</td>
            <td style="padding: 8px; text-align: center;">45</td>
            <td style="padding: 8px; text-align: center;">50</td>
          </tr>
          <tr style="background: #f8f9fa;">
            <td style="padding: 8px;">Abend</td>
            <td style="padding: 8px; text-align: center;">35</td>
            <td style="padding: 8px; text-align: center;">40</td>
            <td style="padding: 8px; text-align: center;">45</td>
          </tr>
          <tr>
            <td style="padding: 8px;">Nacht</td>
            <td style="padding: 8px; text-align: center;">30</td>
            <td style="padding: 8px; text-align: center;">35</td>
            <td style="padding: 8px; text-align: center;">40</td>
          </tr>
        </table>
        <p style="font-size: 11px; color: #999; margin-top: 10px;">
          Alle Angaben in dB(A)
        </p>
      </div>

      <div class="info-card">
        <h3>üí° Tipps zur Schallreduktion</h3>
        <ul style="font-size: 13px;">
          <li>Gr√∂√ütm√∂glichen Abstand w√§hlen</li>
          <li>Schallabgewandte Seite nutzen</li>
          <li>Nachtabsenkung aktivieren</li>
          <li>K√∂rperschallentkopplung vorsehen</li>
          <li>Bei Bedarf Schallschutzwand errichten</li>
        </ul>
      </div>
    </aside>
  </div>

  <footer>
    <p><strong>Wichtiger Hinweis:</strong> Dieser Rechner dient ausschlie√ülich der √ºberschl√§gigen Planung und 
    ersetzt kein Schallgutachten durch einen befugten Sachverst√§ndigen.</p>
    <p style="margin-top: 10px; font-size: 12px;">
      Grundlage: OIB-Richtlinie 5 (Mai 2023), TA L√§rm | ¬© 2024
    </p>
  </footer>
</div>

<script>
// Device Database
const deviceDatabase = {
  'db1': { name: 'Luft-WP 6 kW', lw_day: 58, lw_night: 53 },
  'db2': { name: 'Luft-WP 10 kW', lw_day: 62, lw_night: 57 },
  'db3': { name: 'Luft-WP 15 kW', lw_day: 65, lw_night: 60 },
  'db4': { name: 'Luft-WP 20 kW', lw_day: 67, lw_night: 62 }
};

// Page Navigation
document.querySelectorAll('.nav-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    const pageName = this.getAttribute('data-page');
    
    document.querySelectorAll('.page-content').forEach(page => {
      page.classList.remove('active');
    });
    
    document.getElementById('page-' + pageName).classList.add('active');
    
    document.querySelectorAll('.nav-btn').forEach(b => {
      b.classList.remove('active');
    });
    this.classList.add('active');
    
    const wrapper = document.querySelector('.content-wrapper');
    if (pageName === 'calculator') {
      wrapper.classList.add('with-sidebar');
    } else {
      wrapper.classList.remove('with-sidebar');
    }
  });
});

// Radio Options Visual Feedback
document.querySelectorAll('.radio-option').forEach(option => {
  option.addEventListener('click', function() {
    const radio = this.querySelector('input[type="radio"]');
    radio.checked = true;
    
    this.closest('.radio-group').querySelectorAll('.radio-option').forEach(opt => {
      opt.classList.remove('selected');
    });
    this.classList.add('selected');
  });
});

// Checkbox Options Visual Feedback
document.querySelectorAll('.checkbox-option').forEach(option => {
  option.addEventListener('click', function(e) {
    if (e.target.tagName !== 'INPUT') {
      const checkbox = this.querySelector('input[type="checkbox"]');
      checkbox.checked = !checkbox.checked;
    }
    
    if (this.querySelector('input[type="checkbox"]').checked) {
      this.classList.add('selected');
    } else {
      this.classList.remove('selected');
    }
  });
});

// Device Database Load
document.getElementById('device_database').addEventListener('change', function() {
  const deviceKey = this.value;
  
  if (deviceKey && deviceDatabase[deviceKey]) {
    const device = deviceDatabase[deviceKey];
    document.getElementById('lw_day').value = device.lw_day;
    document.getElementById('lw_night').value = device.lw_night;
  }
});

// K0 Diagram Update
function updateK0Diagram() {
  const k0Select = document.getElementById('k0');
  const diagramDiv = document.getElementById('k0-diagram');
  const selectedValue = k0Select.value;
  
  const diagrams = {
    '3': `<svg viewBox="0 0 300 200" style="max-width: 300px; display: block; margin: 0 auto;">
      <text x="150" y="20" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">Frei aufgestellt (K‚ÇÄ = +3 dB)</text>
      <line x1="50" y1="180" x2="250" y2="180" stroke="#666" stroke-width="2"/>
      <text x="150" y="195" text-anchor="middle" font-size="12" fill="#666">Boden</text>
      <rect x="125" y="110" width="50" height="60" fill="#4a7c3b" stroke="#2d5a24" stroke-width="2"/>
      <text x="150" y="145" text-anchor="middle" font-size="11" fill="white" font-weight="bold">WP</text>
      <circle cx="150" cy="140" r="3" fill="#ffeb3b"/>
      <path d="M 150 140 L 110 100 M 150 140 L 190 100 M 150 140 L 110 180 M 150 140 L 190 180" 
            stroke="#ffeb3b" stroke-width="2" stroke-dasharray="3,3" opacity="0.8"/>
      <text x="150" y="65" text-anchor="middle" font-size="11" fill="#666">Abstand > 3m zu allen W√§nden</text>
    </svg>`,
    
    '6': `<svg viewBox="0 0 300 200" style="max-width: 300px; display: block; margin: 0 auto;">
      <text x="150" y="20" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">An einer Wand (K‚ÇÄ = +6 dB)</text>
      <rect x="30" y="50" width="10" height="130" fill="#999" stroke="#666" stroke-width="2"/>
      <line x1="50" y1="180" x2="250" y2="180" stroke="#666" stroke-width="2"/>
      <rect x="50" y="110" width="50" height="60" fill="#4a7c3b" stroke="#2d5a24" stroke-width="2"/>
      <text x="75" y="145" text-anchor="middle" font-size="11" fill="white" font-weight="bold">WP</text>
      <circle cx="75" cy="140" r="3" fill="#ffeb3b"/>
      <path d="M 75 140 L 115 100 M 75 140 L 115 180" stroke="#ffeb3b" stroke-width="2" stroke-dasharray="3,3" opacity="0.8"/>
      <line x1="75" y1="95" x2="75" y2="80" stroke="#d32f2f" stroke-width="2"/>
      <line x1="40" y1="95" x2="40" y2="80" stroke="#d32f2f" stroke-width="2"/>
      <text x="57" y="75" text-anchor="middle" font-size="10" fill="#d32f2f" font-weight="bold">‚â§ 3m</text>
    </svg>`,
    
    '9': `<svg viewBox="0 0 300 200" style="max-width: 300px; display: block; margin: 0 auto;">
      <text x="150" y="20" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">In einer Ecke (K‚ÇÄ = +9 dB)</text>
      <rect x="30" y="50" width="10" height="130" fill="#999" stroke="#666" stroke-width="2"/>
      <rect x="40" y="50" width="80" height="10" fill="#999" stroke="#666" stroke-width="2"/>
      <line x1="50" y1="180" x2="250" y2="180" stroke="#666" stroke-width="2"/>
      <rect x="50" y="70" width="50" height="60" fill="#4a7c3b" stroke="#2d5a24" stroke-width="2"/>
      <text x="75" y="105" text-anchor="middle" font-size="11" fill="white" font-weight="bold">WP</text>
      <circle cx="75" cy="100" r="3" fill="#ffeb3b"/>
      <path d="M 75 100 L 115 80 M 75 100 L 115 120" stroke="#ffeb3b" stroke-width="2" stroke-dasharray="3,3" opacity="0.8"/>
      <text x="150" y="160" text-anchor="middle" font-size="10" fill="#666">Abst√§nde ‚â§ 3m</text>
    </svg>`,
    
    '9.5': `<svg viewBox="0 0 300 200" style="max-width: 300px; display: block; margin: 0 auto;">
      <text x="150" y="20" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">Zwischen zwei W√§nden (K‚ÇÄ = +9 dB)</text>
      <rect x="30" y="50" width="10" height="130" fill="#999" stroke="#666" stroke-width="2"/>
      <rect x="220" y="50" width="10" height="130" fill="#999" stroke="#666" stroke-width="2"/>
      <line x1="50" y1="180" x2="250" y2="180" stroke="#666" stroke-width="2"/>
      <rect x="125" y="110" width="50" height="60" fill="#4a7c3b" stroke="#2d5a24" stroke-width="2"/>
      <text x="150" y="145" text-anchor="middle" font-size="11" fill="white" font-weight="bold">WP</text>
      <circle cx="150" cy="140" r="3" fill="#ffeb3b"/>
      <path d="M 150 140 L 110 100 M 150 140 L 190 100" stroke="#ffeb3b" stroke-width="2" stroke-dasharray="3,3" opacity="0.8"/>
      <line x1="40" y1="65" x2="60" y2="65" stroke="#d32f2f" stroke-width="2"/>
      <line x1="220" y1="65" x2="200" y2="65" stroke="#d32f2f" stroke-width="2"/>
      <text x="130" y="60" text-anchor="middle" font-size="10" fill="#d32f2f" font-weight="bold">‚â§ 5m</text>
    </svg>`,
    
    '9.6': `<svg viewBox="0 0 300 200" style="max-width: 300px; display: block; margin: 0 auto;">
      <text x="150" y="20" text-anchor="middle" font-size="14" font-weight="bold" fill="#333">Unter Vordach (K‚ÇÄ = +9 dB)</text>
      <rect x="30" y="50" width="10" height="130" fill="#999" stroke="#666" stroke-width="2"/>
      <rect x="40" y="70" width="140" height="8" fill="#888" stroke="#666" stroke-width="2"/>
      <line x1="50" y1="180" x2="250" y2="180" stroke="#666" stroke-width="2"/>
      <rect x="85" y="110" width="50" height="60" fill="#4a7c3b" stroke="#2d5a24" stroke-width="2"/>
      <text x="110" y="145" text-anchor="middle" font-size="11" fill="white" font-weight="bold">WP</text>
      <circle cx="110" cy="140" r="3" fill="#ffeb3b"/>
      <path d="M 110 140 L 80 100 M 110 140 L 140 100" stroke="#ffeb3b" stroke-width="2" stroke-dasharray="3,3" opacity="0.8"/>
      <line x1="110" y1="78" x2="110" y2="95" stroke="#d32f2f" stroke-width="2"/>
      <text x="125" y="90" text-anchor="start" font-size="10" fill="#d32f2f" font-weight="bold">‚â§ 5m</text>
    </svg>`
  };
  
  diagramDiv.innerHTML = diagrams[selectedValue] || diagrams['3'];
}

document.getElementById('k0').addEventListener('change', updateK0Diagram);
updateK0Diagram();

// Get Limits Function
function getLimits() {
  const sensitivity = document.querySelector('input[name="sensitivity"]:checked').value;
  const limits = {
    'kategorie1': { day: 40, evening: 35, night: 30 },
    'kategorie2': { day: 45, evening: 40, night: 35 },
    'kategorie3': { day: 50, evening: 45, night: 40 }
  };
  return limits[sensitivity];
}

// Calculate Function
function calculate() {
  const Lw_day = parseFloat(document.getElementById("lw_day").value);
  const Lw_night = parseFloat(document.getElementById("lw_night").value);
  const tone_day = parseFloat(document.getElementById("tone_day").value);
  const tone_night = parseFloat(document.getElementById("tone_night").value);
  let K0 = parseFloat(document.getElementById("k0").value);
  
  // Handle special K0 values
  if (K0 === 9.5 || K0 === 9.6) K0 = 9;
  
  const r_boundary = parseFloat(document.getElementById("distance_boundary").value);
  const r_immission = parseFloat(document.getElementById("distance_immission").value);
  const num_units = parseInt(document.getElementById("num_units").value);
  
  const measure_enclosure = document.getElementById("measure_enclosure").checked;
  const measure_wall = document.getElementById("measure_wall").checked;
  const measure_damping = document.getElementById("measure_damping").checked;

  if (isNaN(Lw_day) || isNaN(Lw_night) || isNaN(r_boundary) || isNaN(r_immission) || 
      r_boundary <= 0 || r_immission <= 0 || num_units < 1) {
    document.getElementById("result").className = "show";
    document.getElementById("result").innerHTML = '<div class="error-box">‚ö†Ô∏è Bitte g√ºltige Werte eingeben.</div>';
    return;
  }

  // Multiple units correction
  const multi_correction = num_units > 1 ? 10 * Math.log10(num_units) : 0;
  
  // Measures correction
  let measures_correction = 0;
  if (measure_enclosure) measures_correction += 10;
  if (measure_wall) measures_correction += 6;
  if (measure_damping) measures_correction += 3;

  // Calculate Lp at boundary
  const Lp_boundary_day = Lw_day + multi_correction + K0 - 20 * Math.log10(r_boundary) - 11 + tone_day - measures_correction;
  const Lp_boundary_evening = Lw_day + multi_correction + K0 - 20 * Math.log10(r_boundary) - 11 + tone_day - measures_correction;
  const Lp_boundary_night = Lw_night + multi_correction + K0 - 20 * Math.log10(r_boundary) - 11 + tone_night - measures_correction;

  // Calculate Lp at immission point
  const Lp_immission_day = Lw_day + multi_correction + K0 - 20 * Math.log10(r_immission) - 11 + tone_day - measures_correction;
  const Lp_immission_evening = Lw_day + multi_correction + K0 - 20 * Math.log10(r_immission) - 11 + tone_day - measures_correction;
  const Lp_immission_night = Lw_night + multi_correction + K0 - 20 * Math.log10(r_immission) - 11 + tone_night - measures_correction;

  const limits = getLimits();
  
  const day_compliant = Lp_immission_day <= limits.day;
  const evening_compliant = Lp_immission_evening <= limits.evening;
  const night_compliant = Lp_immission_night <= limits.night;
  const overall_compliant = day_compliant && evening_compliant && night_compliant;

  let resultHTML = '<div class="result-section">';
  resultHTML += '<div class="result-header">üìä Berechnungsergebnisse</div>';
  
  resultHTML += '<h3 style="margin: 20px 0 15px 0; color: #333;">An der Grundst√ºcksgrenze:</h3>';
  resultHTML += '<div class="result-grid">';
  
  resultHTML += `<div class="result-item">
    <div class="result-label">Tag (6-19 Uhr)</div>
    <div class="result-value">${Lp_boundary_day.toFixed(1)} dB(A)</div>
    <div class="result-sublabel">Grenzwert: ${limits.day} dB(A)</div>
  </div>`;
  
  resultHTML += `<div class="result-item">
    <div class="result-label">Abend (19-22 Uhr)</div>
    <div class="result-value">${Lp_boundary_evening.toFixed(1)} dB(A)</div>
    <div class="result-sublabel">Grenzwert: ${limits.evening} dB(A)</div>
  </div>`;
  
  resultHTML += `<div class="result-item">
    <div class="result-label">Nacht (22-6 Uhr)</div>
    <div class="result-value">${Lp_boundary_night.toFixed(1)} dB(A)</div>
    <div class="result-sublabel">Grenzwert: ${limits.night} dB(A)</div>
  </div>`;
  
  resultHTML += '</div>';
  
  resultHTML += '<h3 style="margin: 20px 0 15px 0; color: #333;">Am Immissionsort (z.B. Fenster):</h3>';
  resultHTML += '<div class="result-grid">';
  
  resultHTML += `<div class="result-item">
    <div class="result-label">Tag (6-19 Uhr)</div>
    <div class="result-value">${Lp_immission_day.toFixed(1)} dB(A)</div>
    <div class="result-sublabel" style="color: ${day_compliant ? '#155724' : '#721c24'}">
      ${day_compliant ? '‚úì' : '‚ö†'} ${Math.abs(Lp_immission_day - limits.day).toFixed(1)} dB ${day_compliant ? 'unter' : '√ºber'} Grenzwert
    </div>
  </div>`;
  
  resultHTML += `<div class="result-item">
    <div class="result-label">Abend (19-22 Uhr)</div>
    <div class="result-value">${Lp_immission_evening.toFixed(1)} dB(A)</div>
    <div class="result-sublabel" style="color: ${evening_compliant ? '#155724' : '#721c24'}">
      ${evening_compliant ? '‚úì' : '‚ö†'} ${Math.abs(Lp_immission_evening - limits.evening).toFixed(1)} dB ${evening_compliant ? 'unter' : '√ºber'} Grenzwert
    </div>
  </div>`;
  
  resultHTML += `<div class="result-item">
    <div class="result-label">Nacht (22-6 Uhr)</div>
    <div class="result-value">${Lp_immission_night.toFixed(1)} dB(A)</div>
    <div class="result-sublabel" style="color: ${night_compliant ? '#155724' : '#721c24'}">
      ${night_compliant ? '‚úì' : '‚ö†'} ${Math.abs(Lp_immission_night - limits.night).toFixed(1)} dB ${night_compliant ? 'unter' : '√ºber'} Grenzwert
    </div>
  </div>`;
  
  resultHTML += '</div>';
  
  const comparisonClass = overall_compliant ? 'comparison-below' : 'comparison-above';
  const comparisonIcon = overall_compliant ? '‚úì' : '‚ö†Ô∏è';
  const comparisonText = overall_compliant 
    ? 'Alle Immissionsrichtwerte werden eingehalten.'
    : 'Mindestens ein Beurteilungspegel liegt √ºber dem Immissionsrichtwert.';
  
  resultHTML += `<div class="comparison-box ${comparisonClass}">${comparisonIcon} ${comparisonText}</div>`;
  
  resultHTML += '<div class="info-box" style="text-align: left;">';
  resultHTML += '<strong>Berechnungsformel:</strong> Lp = Lw + K‚ÇÄ - 20¬∑log‚ÇÅ‚ÇÄ(r) - 11 + K<sub>T</sub> - K<sub>M</sub><br>';
  resultHTML += `<strong>Parameter:</strong><br>`;
  if (num_units > 1) resultHTML += `‚Ä¢ Anzahl Anlagen: ${num_units} (Korrektur: +${multi_correction.toFixed(1)} dB)<br>`;
  resultHTML += `‚Ä¢ Raumwinkelma√ü K‚ÇÄ: +${K0} dB<br>`;
  if (measures_correction > 0) resultHTML += `‚Ä¢ Schallschutzma√ünahmen: -${measures_correction} dB<br>`;
  resultHTML += '</div>';
  
  resultHTML += '</div>';

  document.getElementById("result").className = "show";
  document.getElementById("result").innerHTML = resultHTML;
}

document.getElementById("calculateBtn").addEventListener("click", calculate);
</script>
</body>
</html>
